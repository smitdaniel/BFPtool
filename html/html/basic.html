
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Basic guideline</title><meta name="generator" content="MATLAB 8.6"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2016-07-10"><meta name="DC.source" content="basic.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Basic guideline</h1><!--introduction--><p>This file contains step-by-step instructions with illustrative images to analyse basic video. The following image (<tt>Figure 1</tt>) shows the GUI of the tool in use. In the bottom left is <b>video player</b> with an open video file. On the upper right is the <b>graphing canvas</b> to review the results.</p><p><img vspace="5" hspace="5" src="basicGUIpic.png" alt=""> </p><p><tt>Figure 1: Tool GUI after openning a video and running contrast analysis</tt></p><p>The graph in the <tt>figure 1</tt> shows the time course of the video contrast in the <b>graph</b>. It can be seen that the contrast is stable; we can assume there would be no focus problem in the video (note there is no guarantee) and perform the most straightforward analysis. In will be introduced in steps from the moment the tool is started and the GUI displayed.</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Open a video</a></li><li><a href="#2">Select tracked bead</a></li><li><a href="#3">Select pipette pattern</a></li><li><a href="#4">Set up interval limits</a></li><li><a href="#5">Tracking and force calculation</a></li></ul></div><h2>Open a video<a name="1"></a></h2><div><ol><li>In <b>Open a video</b> panel, either type video file <i>full path</i> into the edit field, or navigate to the file using <b>Browse</b> button.</li><li>Click <b>Open</b>. The video is openned, first frame displayed in the <b>video player</b>, buttons in the <b>Video commands</b> panel enabled and information about the video in <b>Video information</b> panel populated.</li><li>You can review the video by sliding the bar under the frame (marked by the red box in <tt>figure 1</tt>), or using buttons <b>Fast forward</b>, <b>Rewind</b>, or <b>Frame</b> (<b>go to</b> button, marked by a green box in <tt>Figure 1</tt>) in <b>Video commands</b> panel.</li><li>Click <b>Analyse contrast</b> button on the <b>Video commands</b> panel. This button calculates contrast time course (as seen in the graph of <tt>Figure 1</tt>)---it is the first guide for video editing/interval selection. Note You can switch between contrast measure (<b>SD2</b>) and local contrast measure variability (<b>rSD2</b>) using radiobutton on panel <b>Tracking</b>.</li></ol></div><p>When openning a TIFF format file, a prompt dialog requests the user to provide video framerate, as the information cannot be obtained from the TIFF file itself.</p><p>In this example, we will track the whole video in one interval. It is not necessary to exclude any frames. Therefore, we only need to choose one bead and one pipette pattern. The contrast information supports the image stability assumption, but it is always a good practice to review both contrast measures and inspect the video in suspisiosly looking intervals.</p><h2>Select tracked bead<a name="2"></a></h2><div><ol><li>Click <b>Select</b> button on the <b>Selected bead</b> line in the <b>Set interval</b> panel (tab). The pointer turns into a cross-hair (on video frame canvas).</li><li>Click within the bead You want to track. You can repositon the blue cross-mark as necessary (it is highlighted by blue ring in <tt>Figure 2</tt>).</li><li>Confirm the mark position by clicking the same button, now labelled <b>Confirm</b> (highlighted by the red box in <tt>Figure 2</tt>).</li><li>Program queries about bead contrast polarity (bright/dark) and tries to detect the bead nearest to the marker.</li><li>If the bead is detected correctly (program delineates it by a red circle), confirm in the dialog; the bead centre coordinates are recorded.</li></ol></div><p>Note that the bead position must be provided for the first frame of the processed interval of frames. Pipette pattern can be, under good video quality, selected in any processed frame.</p><p><img vspace="5" hspace="5" src="basicGUIconfirm.png" alt=""> </p><p><tt>Figure 2: Select the bead to track and confirm</tt></p><h2>Select pipette pattern<a name="3"></a></h2><div><ol><li>Click <b>Select</b> button on the <b>Selected pattern</b> line. The pointer will turn into cross-hair on the video canvas.</li><li>Draw a tight box around the pipette tip, to delimit a pattern, which will be matched throughout the video (as shown in <tt>Figure 3</tt>). You can resize and reposition the box as needed.</li><li>Confirm the selection by clicking the button <b>Confirm</b> (marked by the red box in the <tt>figure 3</tt>)</li><li>The program will prompt anchor point selection. For now, click <b>Default</b>---program will assign the anchor to the centre of the pattern. The pattern is saved as well as its initial coordinates. You can review the pattern (and the anchor point) clicking the <b>Show</b> button on the <b>Set Interval</b> tab.</li></ol></div><p>The anchor point is the representative coordinate of the pattern. Anchor's coordinates are returned by the tracking methods, and the RBC deformation calculation is based on the distance between the anchor and the RBC centre. <b>Default</b> position of the anchor is in the centre of the pipette pattern. The best position for the anchor is on one axis with the bead centre and the centre of RBC-bead contact area, so that the distance is maximally aligned with the gradient of the RBC deformation.</p><p><img vspace="5" hspace="5" src="basicGUIpip.png" alt=""> </p><p><tt>Figure 3: Select the pipette tip pattern to be matched through the video</tt></p><h2>Set up interval limits<a name="4"></a></h2><div><ol><li>In this particular example, the limits have been already set, because the whole video is processed without gaps and in full (i.e. all the frames). In the <tt>Figure 3</tt>, the blue box indicates <b>initial frame</b> of tracking (the bead coordinates must be always measured in the initial frame), the green box the <b>final frame</b> of the tracking interval.</li><li>The yellow box in <tt>Figure 3</tt> indicates the <i>index</i> of the frame, where the RBC is unstrained (i.e. RBC and bead touch, but no load is applied). This frame must be provided by user.</li><li>When the <b>pipette</b>, the <b>bead</b>, and the interval <b>key frames</b> (i.e. initial, final and reference frames) are selected, it can be added to the list of intervals for tracking using button <b>Add to list</b> on <b>Set interval</b> panel.</li></ol></div><p>Note that the deformation of RBC is calculated as the change in distance between points of reference supposed to be firmly attached to the RBC, i.e the centre of the bead and the anchor of the pipette. Selecting a frame (<b>frame of reference</b>), where the probe is under no strain allows to measure reference distance of these two items. As the distance between the two points changes during the experiment, we assume, the deformation (extesion or compression) of RBC is equal the change.</p><h2>Tracking and force calculation<a name="5"></a></h2><div><ol><li>After the interval is added to interval list (which is only one interval in this example), click <b>Update</b> button on the <b>Tracking</b> panel. It constructs <i>BFPClass</i> object, which processes all the settings from the GUI.</li><li>Click <b>Track</b> button on the <b>Tracking</b> panel. A progress bar will appear, the video is being processed. When tracking finishes, obtained trajectories are automatically plotted in the <b>graph</b> area, and tracking fidelity report is displayed.</li><li>Finally, click <b>Get Force</b> button on the <b>Tracking</b> panel. Dialog will appear warning the probe was not properly calibrated, click <b>Proceed</b>, the <i>Probe calibration</i> will be described in <i>Advanced features</i> section. The force is calculated and displayed in the <b>graph</b>, as well as deformation. RBC stiffness <img src="basic_eq15636846968047188835.png" alt="$k$"> and its uncertainty <img src="basic_eq02265842152316728025.png" alt="$\Delta k$"> are displayed on the left of the <b>Get Force</b> button.</li></ol></div><p>The fidelity report can help to identify problematic intervals post-processing. In reported intervals, the tracking could be unreliable, and user may need to remove them from the tracking.</p><p>The <b>force</b> is calculated in linear approximation, i.e. we assume linear relation between the RBC deformation and the exerted force. This is largely true for experiments, where <img src="basic_eq12534472291285360343.png" alt="$\Delta x < 500 nm$">, for larger extensions, the linear relation begins to overestimate the force.</p><p>The major information about the experiment, the <b>force</b> (though uncalibrated) and the <b>deformation</b> are obtained in several simple steps. User is then free to analyse them and export for further processing as they like. To obtain more detailed analysis, with calibration and fine tuning, several more features are available and are covered in section <i>Advanced features</i>. The final GUI appearance is shown in <tt>Figure 4</tt>, with tracking marks overlaid on the video frame and the <b>force</b> displayed in the <b>graph</b>.</p><p><img vspace="5" hspace="5" src="basicGUIforce.png" alt=""> </p><p><tt>Figure 4: BFPTool GUI after the force analysis</tt></p><p class="footer"><br><a href="http://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2015b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Basic guideline
% This file contains step-by-step instructions with illustrative images to analyse
% basic video. The following image (|Figure 1|) shows the GUI of the tool in use. In the
% bottom left is *video player* with an open video file. On the upper right is
% the *graphing canvas* to review the results.
%
% <<basicGUIpic.png>>
%
% |Figure 1: Tool GUI after openning a video and running contrast analysis|
%
% The graph in the |figure 1| shows the time course of the video contrast in the *graph*.
% It can be seen that the contrast is stable; we can assume there would be
% no focus problem in the video (note there is no guarantee) and perform the most
% straightforward analysis. In will be introduced in steps from the moment
% the tool is started and the GUI displayed.
%
%% Open a video
%
% # In *Open a video* panel, either type video file _full path_ into the edit field,
% or navigate to the file using *Browse* button.
% # Click *Open*. The video is openned, first frame displayed in the *video
% player*, buttons in the *Video commands* panel enabled and information
% about the video in *Video information* panel populated.
% # You can review the video by sliding the bar under the frame (marked by the 
% red box in |figure 1|), or using
% buttons *Fast forward*, *Rewind*, or *Frame* (*go to* button, marked by a 
% green box in |Figure 1|) in *Video commands* panel.
% # Click *Analyse contrast* button on the *Video commands* panel. This
% button calculates contrast time course (as seen in the graph of |Figure 1|)REPLACE_WITH_DASH_DASH-it is the
% first guide for video editing/interval selection. Note You can switch between contrast
% measure (*SD2*) and local contrast measure variability (*rSD2*) using
% radiobutton on panel *Tracking*.
%
% When openning a TIFF format file, a prompt dialog requests the user to
% provide video framerate, as the information cannot be obtained from the
% TIFF file itself.
%
% In this example, we will track the whole video in one interval. It is not
% necessary to exclude any frames. Therefore, we only need to choose one
% bead and one pipette pattern. The contrast information supports the image
% stability assumption, but it is always a good practice to review both
% contrast measures and inspect the video in suspisiosly looking intervals.
%
%% Select tracked bead
%
% # Click *Select* button on the *Selected bead* line in the *Set interval*
% panel (tab). The pointer turns into a cross-hair (on video frame canvas).
% # Click within the bead You want to track. You can repositon the blue 
% cross-mark as necessary (it is highlighted by blue ring in |Figure 2|).
% # Confirm the mark position by clicking the same button, now labelled 
% *Confirm* (highlighted by the red box in |Figure 2|).
% # Program queries about bead contrast polarity (bright/dark) and
% tries to detect the bead nearest to the marker.
% # If the bead is detected correctly (program delineates it by a red
% circle), confirm in the dialog; the bead centre coordinates are recorded.
%
% Note that the bead position must be provided for the first frame of the
% processed interval of frames. Pipette pattern can be, under good video
% quality, selected in any processed frame.
%
% <<basicGUIconfirm.png>>
%
% |Figure 2: Select the bead to track and confirm|
%
%% Select pipette pattern
%
% # Click *Select* button on the *Selected pattern* line. The pointer will
% turn into cross-hair on the video canvas.
% # Draw a tight box around the pipette tip, to delimit a pattern, which
% will be matched throughout the video (as shown in |Figure 3|). You can resize
% and reposition the box as needed.
% # Confirm the selection by clicking the button *Confirm* (marked by the
% red box in the |figure 3|)
% # The program will prompt anchor point selection. For now, click
% *Default*REPLACE_WITH_DASH_DASH-program will assign the anchor to the centre of the pattern.
% The pattern is saved as well as its initial coordinates. You can review the
% pattern (and the anchor point) clicking the *Show* button on the *Set
% Interval* tab.
%
% The anchor point is the representative coordinate of the pattern.
% Anchor's coordinates are returned by the tracking methods, and the RBC
% deformation calculation is based on the distance between the anchor and
% the RBC centre. *Default* position of the anchor is in the centre of the
% pipette pattern. The best position for the anchor is on one axis with the
% bead centre and the centre of RBC-bead contact area, so that the distance
% is maximally aligned with the gradient of the RBC deformation.
%
% <<basicGUIpip.png>>
%
% |Figure 3: Select the pipette tip pattern to be matched through the
% video|
%
%% Set up interval limits
%
% # In this particular example, the limits have been already set, because the whole video is
% processed without gaps and in full (i.e. all the frames). In the |Figure 3|, the blue box indicates *initial frame* of
% tracking (the bead coordinates must be always measured in the initial
% frame), the green box the *final frame* of the tracking interval.
% # The yellow box in |Figure 3| indicates the _index_ of the frame, where the
% RBC is unstrained (i.e. RBC and bead touch, but no load is applied). This
% frame must be provided by user.
% # When the *pipette*, the *bead*, and the interval *key frames* (i.e. initial, 
% final and reference frames) are selected, it can be added to the list of
% intervals for tracking using button *Add to list* on *Set interval* panel.
%
% Note that the deformation of RBC is calculated as the change in distance
% between points of reference supposed to be firmly attached to the RBC,
% i.e the centre of the bead and the anchor of the pipette. Selecting a frame
% (*frame of reference*), where the probe is under
% no strain allows to measure reference distance of these two items. As the
% distance between the two points changes during the experiment, we assume, the
% deformation (extesion or compression) of RBC is equal the change.
%
%% Tracking and force calculation
%
% # After the interval is added to interval list (which is only one interval
% in this example), click *Update* button on the *Tracking*
% panel. It constructs _BFPClass_ object, which processes all the settings
% from the GUI.
% # Click *Track* button on the *Tracking* panel. A progress bar will
% appear, the video is being processed. When tracking finishes, obtained 
% trajectories are automatically plotted in the *graph* area, and tracking 
% fidelity report is displayed.
% # Finally, click *Get Force* button on the *Tracking* panel. Dialog will
% appear warning the probe was not properly calibrated, click *Proceed*,
% the _Probe calibration_ will be described in _Advanced features_ section. The
% force is calculated and displayed in the *graph*, as well as deformation. RBC stiffness $k$ and its
% uncertainty $\Delta k$ are displayed on the left of the *Get Force* button.
%
% The fidelity report can help to identify problematic intervals
% post-processing. In reported intervals, the tracking could be unreliable,
% and user may need to remove them from the tracking.
%
% The *force* is calculated in linear approximation, i.e. we assume linear
% relation between the RBC deformation and the exerted force. This is
% largely true for experiments, where $\Delta x < 500 nm$, for larger
% extensions, the linear relation begins to overestimate the force.
%
% The major information about the experiment, the *force* (though
% uncalibrated) and the *deformation* are obtained in several simple steps.
% User is then free to analyse them and export for further processing as they like.
% To obtain more
% detailed analysis, with calibration and fine tuning, several more
% features are available and are covered in section _Advanced features_.
% The final GUI appearance is shown in |Figure 4|, with tracking marks
% overlaid on the video frame and the *force* displayed in the *graph*.
%
% <<basicGUIforce.png>>
%
% |Figure 4: BFPTool GUI after the force analysis|





##### SOURCE END #####
--></body></html>